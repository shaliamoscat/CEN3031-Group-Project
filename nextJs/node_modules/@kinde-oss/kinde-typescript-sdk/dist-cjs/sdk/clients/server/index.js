"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createKindeServerClient = void 0;
const authorization_code_js_1 = __importDefault(require("./authorization-code.js"));
const environment_js_1 = require("../../environment.js");
const client_credentials_js_1 = __importDefault(require("./client-credentials.js"));
const index_js_1 = require("../../oauth2-flows/index.js");
const createKindeServerClient = (grantType, options) => {
    if (!(0, environment_js_1.isNodeEnvironment)()) {
        throw new Error('this method must be invoked in a node.js environment');
    }
    switch (grantType) {
        case index_js_1.GrantType.AUTHORIZATION_CODE: {
            const clientOptions = options;
            return (0, authorization_code_js_1.default)(clientOptions, false);
        }
        case index_js_1.GrantType.PKCE: {
            const clientOptions = options;
            return (0, authorization_code_js_1.default)(clientOptions, true);
        }
        case index_js_1.GrantType.CLIENT_CREDENTIALS: {
            const clientOptions = options;
            return (0, client_credentials_js_1.default)(clientOptions);
        }
        default: {
            throw new Error('Unrecognized grant type provided');
        }
    }
};
exports.createKindeServerClient = createKindeServerClient;
